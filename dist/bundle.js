(()=>{"use strict";const e=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(`Il y a eu une erreur : ${e}`)}},t=e=>{let t=[],n=[];if(t=JSON.parse(localStorage.getItem("cocktails")),null===t)return;let a=[...e];for(let e=0;e<a.length;e++)for(let c=0;c<t.length;c++)if(a[e].nom===t[c].nom){a[e].accessoire=t[c].accessoire;let s={...a[e]};s.accessoire=t[c].accessoire,s.unitée=t[c].unitée,n.push(s)}return n},n=async()=>{let n=JSON.parse(localStorage.getItem("cocktails"));null!==n&&(document.querySelector(".nbArticles").textContent=n.length);let a=await e("http://localhost:2000/api/cocktails"),c=t(a),s=0;for(let e=0;e<c.length;e++)s+=parseFloat(c[e].prix)*parseFloat(c[e].unitée);document.querySelector(".prix_total").textContent=s},a=e=>{let t="";for(let n=0;n<e.length;n++)t+=`\n                <article>\n                    <div class="image">\n                        <img\n                            class="panierPageImg"\n                            src="../images/cocktails/${e[n].imageUrl}.jpg"\n                            alt="${e[n].altTxt}"\n                        />\n                    </div>\n                    <div class="texte">\n                        <h2>${e[n].nom}</h2>\n                        <p><span class="prix">${e[n].prix}</span>&nbsp;€</p>\n                        <p class="accessoire">${e[n].accessoire}</p>\n                        <label for="nombre" class="quantity">${e[n].unitée}</label\n                        ><input\n                            type="number"\n                            min="1"\n                            max="100"\n                            id="nombre"\n                            class="input_panier"\n                            value="${e[n].unitée}"\n                            name="nombre"\n                        />\n                        <div class="btn_container">\n                            <button id="btn_supprimer" class="btn">Supprimer</button>\n                        </div>\n                    </div>\n                </article> \n    `;document.querySelector(".panier_container").innerHTML=t},c=()=>{(async()=>{(e=>{let t="";for(let n=0;n<e.length;n++)t+=`\n        <article>\n        <a href="./SRC/HTML/focus.html?id=${e[n]._id}">\n            <img src="./SRC/images/cocktails/${e[n].imageUrl}.jpg" alt="${e[n].altTxt}" />\n        </a>\n        <h3>${e[n].nom}</h3>\n        <p>${e[n].prix} €</p>\n        <a href="./SRC/HTML/focus.html?id=${e[n]._id}">\n         <button class="btn">\n            <i class="fa-solid fa-cart-shopping"></i>Continuer\n        </button>\n        </a>\n    </article>\n        `;document.querySelector(".cocktails_container").innerHTML=t})(await e("http://localhost:2000/api/cocktails"))})()},s=()=>{let e=(t=window.location.href,new URL(t).searchParams.get("id"));var t;(async()=>{const t=`http://localhost:2000/api/cocktails/${e}`;let n=await(async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(`Il y a eu une erreur : ${e}`)}})(t);var a;a=n,document.querySelector(".focus").innerHTML=`\n<div class="container">\n<article>\n    <div class="image">\n        <img\n            class="focusImg"\n            src="../images/cocktails/${a.imageUrl}.jpg"\n            alt="${a.altTxt}"\n        />\n    </div>\n    <div class="texte">\n        <h2>${a.nom}</h2>\n        <p><span class="prix">${a.prix}</span>&nbsp;€</p>\n        <p class="description_title">Description :</p>\n        <p class="description_content">${a.description}</p>\n     <div class="thing">   <label>Choisissez un supplément</label>\n    <select name="supplément" id="supplément">\n        <option value="${a.accessoire[0]}">${a.accessoire[0]}</option>\n        <option value="${a.accessoire[1]}">${a.accessoire[1]}</option>\n        <option value="${a.accessoire[2]}">${a.accessoire[2]}</option>\n    </select></div>\n    <div class="thing"><label for="nombre">Choisissez un nombre</label\n    ><input\n        type="number"\n        min="1"\n        max="100"\n        id="nombre"\n        value="1"\n        name="nombre"\n    /></div>\n    </div>\n    \n    <div class="btn_container">\n    <a href="./panier.html" ><button id="btn_focus" class="btn">Ajouter au panier</button></a>\n    </div>\n</article>\n</div>\n`})()};n(),(()=>{let e=(new Date).getFullYear();document.querySelector(".year").innerHTML=e})();const i="http://localhost:2000/api/cocktails";switch((()=>{const e=window.location.pathname.split("/");return e[e.length-1].replace(".html","")})()){case"index":c();break;case"":c();case"focus":s();break;case"panier":(async()=>{let c=await e("http://localhost:2000/api/cocktails"),s=t(c);a(s),n()})();break;default:console.error("Page not found")}document.addEventListener("click",(e=>{if("btn_focus"===e.target.getAttribute("id")){(e=>{let t=e.closest(".container"),n=t.querySelector(".texte h2").textContent,a=t.querySelector("select").value,c=t.querySelector("#nombre").value,s=[],i=JSON.parse(localStorage.getItem("cocktails"));null!==i&&(s=i);let l={nom:n,accessoire:a,unitée:parseFloat(c)},r=!1;for(let e=0;e<s.length;e++)s[e].nom==l.nom&&s[e].accessoire==l.accessoire&&(s[e].unitée=parseFloat(s[e].unitée)+parseFloat(l.unitée),r=!0);r||s.push(l),localStorage.setItem("cocktails",JSON.stringify(s))})(e.target),n()}})),document.addEventListener("click",(t=>{"btn_supprimer"===t.target.getAttribute("id")&&(async()=>{let c=await(async(t,n)=>{let a=t.parentElement.closest(".texte"),c=a.querySelector("h2").textContent,s=a.querySelector(".accessoire").textContent,i=(a.querySelector(".prix").value,JSON.parse(localStorage.getItem("cocktails")));for(let e=0;e<i.length;e++)i[e].nom===c&&i[e].accessoire===s&&(i.splice(e,1),localStorage.setItem("cocktails",JSON.stringify(i)));let l=await e(n);for(let e=0;e<i.length;e++)for(let t=0;t<l.length;t++)i[e].nom===l[t].nom&&(i[e].prix=l[t].prix,i[e].imageUrl=l[t].imageUrl);return i})(t.target,i);a(c),n()})()})),document.addEventListener("click",(async c=>{if(c.target.classList.contains("input_panier")){(e=>{let t=e.target.value,n=e.target.closest("article").querySelector("h2").textContent,a=e.target.closest("article").querySelector(".accessoire").textContent,c=JSON.parse(localStorage.getItem("cocktails"));for(let e=0;e<c.length;e++)c[e].nom===n&&c[e].accessoire===a&&(c[e].unitée=t);localStorage.setItem("cocktails",JSON.stringify(c))})(c);let s=await e(i),l=t(s);a(l),n()}}))})();