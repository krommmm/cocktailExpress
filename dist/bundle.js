(()=>{"use strict";const e=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.log(`Il y a eu une erreur : ${e}`)}},t=e=>{let t=[],n=[];if(t=JSON.parse(localStorage.getItem("cocktails")),null===t)return;let a=[...e];for(let e=0;e<a.length;e++)for(let i=0;i<t.length;i++)if(a[e].nom===t[i].nom){a[e].accessoire=t[i].accessoire;let l={...a[e]};l.accessoire=t[i].accessoire,l.unitée=t[i].unitée,n.push(l)}return n},n=async()=>{let n=JSON.parse(localStorage.getItem("cocktails"));null!==n&&(document.querySelector(".nbArticles").textContent=n.length);let a=await e("http://localhost:2000/api/cocktails"),i=t(a),l=0;for(let e=0;e<i.length;e++)l+=parseFloat(i[e].prix)*parseFloat(i[e].unitée);document.querySelector(".prix_total").textContent=l},a=e=>{let t="";for(let n=0;n<e.length;n++)t+=`\n                <article>\n                    <div class="image">\n                        <img\n                            class="panierPageImg"\n                            src="../images/cocktails/${e[n].imageUrl}.jpg"\n                            alt="${e[n].altTxt}"\n                        />\n                    </div>\n                    <div class="texte">\n                        <h2>${e[n].nom}</h2>\n                        <p><span class="prix">${e[n].prix}</span>&nbsp;€</p>\n                        <p class="accessoire">${e[n].accessoire}</p>\n                        <label for="nombre" class="quantity">${e[n].unitée}</label\n                        ><input\n                            type="number"\n                            min="1"\n                            max="100"\n                            id="nombre"\n                            class="input_panier"\n                            value="${e[n].unitée}"\n                            name="nombre"\n                        />\n                        <div class="btn_container">\n                            <button id="btn_supprimer" class="btn">Supprimer</button>\n                        </div>\n                    </div>\n                </article> \n    `;document.querySelector(".panier_container").innerHTML=t};n(),(()=>{let e=(new Date).getFullYear();document.querySelector(".year").innerHTML=e})();const i="http://localhost:2000/api/cocktails";if("CocktailExpress Accueil"===document.title&&(async()=>{(e=>{let t="";for(let n=0;n<e.length;n++)t+=`\n        <article>\n        <a href="./SRC/HTML/focus.html?id=${e[n]._id}">\n            <img src="./SRC/images/cocktails/${e[n].imageUrl}.jpg" alt="${e[n].altTxt}" />\n        </a>\n        <h3>${e[n].nom}</h3>\n        <p>${e[n].prix} €</p>\n        <a href="./SRC/HTML/focus.html?id=${e[n]._id}">\n         <button class="btn">\n            <i class="fa-solid fa-cart-shopping"></i>Continuer\n        </button>\n        </a>\n    </article>\n        `;document.querySelector(".cocktails_container").innerHTML=t})(await e(i))})(),"Cocktail express zoom"===document.title){let e=(l=window.location.href,new URL(l).searchParams.get("id"));(async()=>{const t=`http://localhost:2000/api/cocktails/${e}`;let n=await(async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.log(`Il y a eu une erreur : ${e}`)}})(t);var a;a=n,document.querySelector(".focus").innerHTML=`\n<div class="container">\n<article>\n    <div class="image">\n        <img\n            class="focusImg"\n            src="../images/cocktails/${a.imageUrl}.jpg"\n            alt="${a.altTxt}"\n        />\n    </div>\n    <div class="texte">\n        <h2>${a.nom}</h2>\n        <p><span class="prix">${a.prix}</span>&nbsp;€</p>\n        <p class="description_title">Description :</p>\n        <p class="description_content">${a.description}</p>\n     <div class="thing">   <label>Choisissez un supplément</label>\n    <select name="supplément" id="supplément">\n        <option value="${a.accessoire[0]}">${a.accessoire[0]}</option>\n        <option value="${a.accessoire[1]}">${a.accessoire[1]}</option>\n        <option value="${a.accessoire[2]}">${a.accessoire[2]}</option>\n    </select></div>\n    <div class="thing"><label for="nombre">Choisissez un nombre</label\n    ><input\n        type="number"\n        min="1"\n        max="100"\n        id="nombre"\n        value="1"\n        name="nombre"\n    /></div>\n    </div>\n    \n    <div class="btn_container">\n    <a href="./panier.html" ><button id="btn_focus" class="btn">Ajouter au panier</button></a>\n    </div>\n</article>\n</div>\n`})()}var l;"Cocktail express panier"===document.title&&(async()=>{let l=await e(i),c=t(l);a(c),n()})(),document.addEventListener("click",(e=>{if("btn_focus"===e.target.getAttribute("id")){(e=>{let t=e.closest(".container"),n=t.querySelector(".texte h2").textContent,a=t.querySelector("select").value,i=t.querySelector("#nombre").value,l=[],c=JSON.parse(localStorage.getItem("cocktails"));null!==c&&(l=c);let s={nom:n,accessoire:a,unitée:parseFloat(i)},o=!1;for(let e=0;e<l.length;e++)l[e].nom==s.nom&&l[e].accessoire==s.accessoire&&(l[e].unitée=parseFloat(l[e].unitée)+parseFloat(s.unitée),o=!0);o||l.push(s),localStorage.setItem("cocktails",JSON.stringify(l))})(e.target),n()}})),document.addEventListener("click",(t=>{"btn_supprimer"===t.target.getAttribute("id")&&(async()=>{let l=await(async(t,n)=>{let a=t.parentElement.closest(".texte"),i=a.querySelector("h2").textContent,l=a.querySelector(".accessoire").textContent,c=(a.querySelector(".prix").value,JSON.parse(localStorage.getItem("cocktails")));for(let e=0;e<c.length;e++)c[e].nom===i&&c[e].accessoire===l&&(c.splice(e,1),localStorage.setItem("cocktails",JSON.stringify(c)));let s=await e(n);for(let e=0;e<c.length;e++)for(let t=0;t<s.length;t++)c[e].nom===s[t].nom&&(c[e].prix=s[t].prix,c[e].imageUrl=s[t].imageUrl);return c})(t.target,i);a(l),n()})()})),document.addEventListener("click",(async l=>{if("input_panier"===l.target.getAttribute("class")){(e=>{let t=e.target.value,n=e.target.closest("article").querySelector("h2").textContent,a=JSON.parse(localStorage.getItem("cocktails"));for(let e=0;e<a.length;e++)a[e].nom===n&&(a[e].unitée=t);localStorage.setItem("cocktails",JSON.stringify(a))})(l);let c=await e(i),s=t(c);a(s),n()}}))})();