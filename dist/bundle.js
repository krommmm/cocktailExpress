(()=>{"use strict";const e=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(`Il y a eu une erreur : ${e}`)}},t=e=>{let t=[],n=[];if(t=JSON.parse(localStorage.getItem("cocktails")),null===t)return;let a=[...e];for(let e=0;e<a.length;e++)for(let i=0;i<t.length;i++)if(a[e].nom===t[i].nom){a[e].accessoire=t[i].accessoire;let c={...a[e]};c.accessoire=t[i].accessoire,c.unitée=t[i].unitée,n.push(c)}return n},n=async()=>{let n=JSON.parse(localStorage.getItem("cocktails"));null!==n&&(document.querySelector(".nbArticles").textContent=n.length);let a=await e("http://localhost:2000/api/cocktails"),i=t(a),c=0;for(let e=0;e<i.length;e++)c+=parseFloat(i[e].prix)*parseFloat(i[e].unitée);document.querySelector(".prix_total").textContent=c},a=e=>{let t="";for(let n=0;n<e.length;n++)t+=`\n                <article>\n                    <div class="image">\n                        <img\n                            class="panierPageImg"\n                            src="../images/cocktails/${e[n].imageUrl}.jpg"\n                            alt="${e[n].altTxt}"\n                        />\n                    </div>\n                    <div class="texte">\n                        <h2>${e[n].nom}</h2>\n                        <p><span class="prix">${e[n].prix}</span>&nbsp;€</p>\n                        <p class="accessoire">${e[n].accessoire}</p>\n                        <label for="nombre" class="quantity">${e[n].unitée}</label\n                        ><input\n                            type="number"\n                            min="1"\n                            max="100"\n                            id="nombre"\n                            class="input_panier"\n                            value="${e[n].unitée}"\n                            name="nombre"\n                        />\n                        <div class="btn_container">\n                            <button id="btn_supprimer" class="btn">Supprimer</button>\n                        </div>\n                    </div>\n                </article> \n    `;document.querySelector(".panier_container").innerHTML=t},i="http://localhost:2000";n(),(()=>{let e=(new Date).getFullYear();document.querySelector(".year").innerHTML=e})();const c=`${i}/api/cocktails`;if("CocktailExpress Accueil"===document.title&&(async()=>{(e=>{let t="";for(let n=0;n<e.length;n++)t+=`\n        <article>\n        <a href="./SRC/HTML/focus.html?id=${e[n]._id}">\n            <img src="./SRC/images/cocktails/${e[n].imageUrl}.jpg" alt="${e[n].altTxt}" />\n        </a>\n        <h3>${e[n].nom}</h3>\n        <p>${e[n].prix} €</p>\n        <a href="./SRC/HTML/focus.html?id=${e[n]._id}">\n         <button class="btn">\n            <i class="fa-solid fa-cart-shopping"></i>Continuer\n        </button>\n        </a>\n    </article>\n        `;document.querySelector(".cocktails_container").innerHTML=t})(await e(c))})(),"Cocktail express zoom"===document.title){let e=(r=window.location.href,new URL(r).searchParams.get("id"));(async()=>{const t=`${i}/api/cocktails/${e}`;let n=await(async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(`Il y a eu une erreur : ${e}`)}})(t);var a;a=n,document.querySelector(".focus").innerHTML=`\n<div class="container">\n<article>\n    <div class="image">\n        <img\n            class="focusImg"\n            src="../images/cocktails/${a.imageUrl}.jpg"\n            alt="${a.altTxt}"\n        />\n    </div>\n    <div class="texte">\n        <h2>${a.nom}</h2>\n        <p><span class="prix">${a.prix}</span>&nbsp;€</p>\n        <p class="description_title">Description :</p>\n        <p class="description_content">${a.description}</p>\n     <div class="thing">   <label>Choisissez un supplément</label>\n    <select name="supplément" id="supplément">\n        <option value="${a.accessoire[0]}">${a.accessoire[0]}</option>\n        <option value="${a.accessoire[1]}">${a.accessoire[1]}</option>\n        <option value="${a.accessoire[2]}">${a.accessoire[2]}</option>\n    </select></div>\n    <div class="thing"><label for="nombre">Choisissez un nombre</label\n    ><input\n        type="number"\n        min="1"\n        max="100"\n        id="nombre"\n        value="1"\n        name="nombre"\n    /></div>\n    </div>\n    \n    <div class="btn_container">\n    <a href="./panier.html" ><button id="btn_focus" class="btn">Ajouter au panier</button></a>\n    </div>\n</article>\n</div>\n`})()}var r;"Cocktail express panier"===document.title&&(async()=>{let i=await e(c),r=t(i);a(r),n()})(),document.addEventListener("click",(e=>{if("btn_focus"===e.target.getAttribute("id")){(e=>{let t=e.closest(".container"),n=t.querySelector(".texte h2").textContent,a=t.querySelector("select").value,i=t.querySelector("#nombre").value,c=[],r=JSON.parse(localStorage.getItem("cocktails"));null!==r&&(c=r);let l={nom:n,accessoire:a,unitée:parseFloat(i)},s=!1;for(let e=0;e<c.length;e++)c[e].nom==l.nom&&c[e].accessoire==l.accessoire&&(c[e].unitée=parseFloat(c[e].unitée)+parseFloat(l.unitée),s=!0);s||c.push(l),localStorage.setItem("cocktails",JSON.stringify(c))})(e.target),n()}})),document.addEventListener("click",(t=>{"btn_supprimer"===t.target.getAttribute("id")&&(async()=>{let i=await(async(t,n)=>{let a=t.parentElement.closest(".texte"),i=a.querySelector("h2").textContent,c=a.querySelector(".accessoire").textContent,r=(a.querySelector(".prix").value,JSON.parse(localStorage.getItem("cocktails")));for(let e=0;e<r.length;e++)r[e].nom===i&&r[e].accessoire===c&&(r.splice(e,1),localStorage.setItem("cocktails",JSON.stringify(r)));let l=await e(n);for(let e=0;e<r.length;e++)for(let t=0;t<l.length;t++)r[e].nom===l[t].nom&&(r[e].prix=l[t].prix,r[e].imageUrl=l[t].imageUrl);return r})(t.target,c);a(i),n()})()})),document.addEventListener("click",(async i=>{if("input_panier"===i.target.getAttribute("class")){(e=>{let t=e.target.value,n=e.target.closest("article").querySelector("h2").textContent,a=e.target.closest("article").querySelector(".accessoire").textContent,i=JSON.parse(localStorage.getItem("cocktails"));for(let e=0;e<i.length;e++)i[e].nom===n&&i[e].accessoire===a&&(i[e].unitée=t);localStorage.setItem("cocktails",JSON.stringify(i))})(i);let r=await e(c),l=t(r);a(l),n()}}))})();